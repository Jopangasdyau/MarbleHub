local Library = loadstring(game:HttpGetAsync("https://github.com/ActualMasterOogway/Fluent-Renewed/releases/latest/download/Fluent.luau"))()

local Window = Library:CreateWindow{
    Title = `Banana hub`,
    SubTitle = "test",
    TabWidth = 160,
    Size = UDim2.fromOffset(830, 525),
    Resize = true, -- Resize this ^ Size according to a 1920x1080 screen, good for mobile users but may look weird on some devices
    MinSize = Vector2.new(470, 380),
    Acrylic = true, -- The blur may be detectable, setting this to false disables blur entirely
    Theme = "Dark",
    MinimizeKey = Enum.KeyCode.RightControl -- Used when theres no MinimizeKeybind
}

local Tabs = {
    Main = Window:CreateTab{
        Title = "Main",
        Icon = "nil"
    }
}

-- Store selected seeds
local selectedSeeds = {}

-- Create dropdown
local MultiDropdown = Tabs.Main:CreateDropdown("MultiDropdown", {
    Title = "Seed",
    Description = "",
    Values = {"Carrot", "Strawberry", "Blueberry", "Orange Tulip", "Tomato", "Corn", "Daffodil", "Watermelon", "Pumpkin", "Apple", "Bamboo", "Coconut", "Cactus", "Dragon Fruit", "Mango", "Mushroom"},
    Multi = true,
    Default = {},
})

-- Update selected seeds when changed
MultiDropdown:OnChanged(function(Value)
    selectedSeeds = {}
    for SeedName, IsSelected in pairs(Value) do
        if IsSelected then
            table.insert(selectedSeeds, SeedName)
        end
    end
end)

local Toggle1 = Tabs.Main:CreateToggle("MyToggle", {Title = "Auto buy", Default = false})

Toggle1:OnChanged(function()
    if not Toggle1Interacted then
        Toggle1Interacted = true
        return
    end

    BuyEnabled = not BuyEnabled

    if BuyEnabled then
        task.spawn(function()
            while BuyEnabled do
                for _, seed in ipairs(selectedSeeds) do
                    local args = {seed}
                    game:GetService("ReplicatedStorage").GameEvents.BuySeedStock:FireServer(unpack(args))
                    task.wait(0.1)
                end
            end
        end)
    end
end)

-- Create dropdown
local selectedSeeds = {}

local MultiDropdown = Tabs.Main:CreateDropdown("MultiDropdown", {
    Title = "Dropdown",
    Description = "You can select multiple values.",
    Values = {"Carrot", "Strawberry", "Blueberry", "Orange Tulip", "Tomato", "Corn", "Daffodil", "Watermelon", "Pumpkin", "Apple", "Bamboo", "Coconut", "Cactus", "Dragon Fruit", "Mango", "Mushroom"},
    Multi = true,
    Default = {},
})

MultiDropdown:OnChanged(function(Value)
    selectedSeeds = {}
    for SeedName, IsSelected in pairs(Value) do
        if IsSelected then
            table.insert(selectedSeeds, SeedName)
        end
    end
end)

-- Toggle auto-buy
local BuyEnabled = false
local Toggle1Interacted = false

Toggle1:OnChanged(function()
    if not Toggle1Interacted then
        Toggle1Interacted = true
        return
    end

    BuyEnabled = not BuyEnabled

    if BuyEnabled then
        task.spawn(function()
            while BuyEnabled do
                for _, seed in ipairs(selectedSeeds) do
                    local args = {seed}
                    game:GetService("ReplicatedStorage").GameEvents.BuySeedStock:FireServer(unpack(args))
                end
                task.wait(0.1) -- single delay for the whole loop
            end
        end)
    end
end)
